<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Matemática - SAEB 2025 🔥</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&family=Roboto+Condensed:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --neon-green: #00FF88; --neon-pink: #FF0080; --neon-blue: #00BFFF; --neon-yellow: #FFFF00;
            --dark-bg: #0A0A0A; --darker-bg: #050505; --card-bg: #151515; --text-primary: #FFFFFF; --text-secondary: #CCCCCC;
            --accent-orange: #FF6B35; --gradient-main: linear-gradient(135deg, #FF0080, #00FF88, #00BFFF);
            --gradient-secondary: linear-gradient(45deg, #FF6B35, #FFFF00); --correct-green: #00FF00; --error-red: #FF3333;
        }
        body { font-family: 'Roboto Condensed', sans-serif; background: var(--dark-bg); color: var(--text-primary); line-height: 1.4; overflow-x: hidden; min-height: 100vh; }
        .bg-grid { position: fixed; inset: 0; background:
            linear-gradient(rgba(0,255,136,.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0,255,136,.1) 1px, transparent 1px); background-size: 50px 50px; z-index: 1; pointer-events: none; animation: gridMove 20s linear infinite; }
        @keyframes gridMove { 0%{ transform: translate(0,0) } 100%{ transform: translate(50px,50px) } }
        .neon-particles { position: fixed; inset: 0; pointer-events: none; z-index: 2; }
        .particle { position: absolute; width: 4px; height: 4px; background: var(--neon-green); border-radius: 50%; box-shadow: 0 0 10px var(--neon-green); animation: particleFloat 8s infinite ease-in-out; }
        @keyframes particleFloat { 0%,100%{ transform: translateY(100vh); opacity:0 } 10%,90%{ opacity:1 } 50%{ transform: translateY(-10vh) } }
        header { position: fixed; top: 0; width: 100%; background: rgba(10,10,10,.9); backdrop-filter: blur(20px); border-bottom: 2px solid var(--neon-green); z-index: 1000; }
        .header-content { max-width: 1400px; margin: 0 auto; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; gap: 1rem; }
        .logo { font-family: 'Oswald', sans-serif; font-size: clamp(1.5rem,4vw,2rem); font-weight: 700; background: var(--gradient-main); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 3px; cursor: pointer; }
        .quiz-info { display: flex; align-items: center; gap: 2rem; color: var(--text-secondary); font-size: clamp(.9rem,2vw,1rem); }
        .progress-info { display: flex; align-items: center; gap: 1rem; }
        .question-counter { background: var(--gradient-secondary); color: var(--dark-bg); padding: .5rem 1.5rem; border-radius: 25px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
        .score { color: var(--neon-green); font-weight: 700; }
        .quiz-container { margin-top: 120px; min-height: calc(100vh - 120px); position: relative; z-index: 10; }
        .question-container { max-width: 900px; margin: 0 auto; padding: 2rem; display: flex; flex-direction: column; min-height: calc(100vh - 160px); }
        .question-card { background: var(--card-bg); border: 2px solid var(--neon-blue); border-radius: 20px; padding: clamp(2rem,5vw,3rem); margin-bottom: 2rem; position: relative; overflow: hidden; box-shadow: 0 0 50px rgba(0,191,255,.3); }
        .question-card::before { content:''; position:absolute; inset:0; background: var(--gradient-main); opacity:.05; border-radius:20px; }
        .question-number { position: absolute; top: -10px; right: 20px; background: var(--gradient-main); color: var(--dark-bg); padding: .5rem 1.5rem; border-radius: 0 0 15px 15px; font-family:'Oswald',sans-serif; font-weight:700; text-transform: uppercase; font-size:.9rem; letter-spacing:1px; }
        .question-text { font-size: clamp(1.1rem,3vw,1.4rem); line-height:1.6; margin-bottom:2rem; color: var(--text-primary); }
        .alternatives-container { display:flex; flex-direction:column; gap:1rem; margin-bottom:2rem; }
        .alternative { background: var(--darker-bg); border: 2px solid transparent; border-radius: 15px; padding: clamp(1rem,3vw,1.5rem); cursor: pointer; transition: all .3s cubic-bezier(.175,.885,.32,1.275); position: relative; overflow:hidden; display:flex; align-items:center; gap:1rem; }
        .alternative::before{ content:''; position:absolute; inset:0; background: var(--gradient-main); opacity:0; transition: opacity .3s; border-radius:15px; }
        .alternative:hover{ border-color: var(--neon-green); transform: translateX(10px); box-shadow: 0 5px 20px rgba(0,255,136,.3); }
        .alternative:hover::before{ opacity:.1 }
        .alternative.selected{ border-color: var(--neon-blue); background: rgba(0,191,255,.1); transform: translateX(10px); }
        .alternative.correct{ border-color: var(--correct-green); background: rgba(0,255,0,.1); animation: correctPulse 1s ease-out; }
        .alternative.incorrect{ border-color: var(--error-red); background: rgba(255,51,51,.1); animation: incorrectShake .5s ease-out; }
        @keyframes correctPulse { 0%{transform:scale(1)} 50%{transform:scale(1.02)} 100%{transform:scale(1)} }
        @keyframes incorrectShake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-5px)} 75%{transform:translateX(5px)} }
        .alternative-letter{ background: var(--gradient-main); color: var(--dark-bg); width:40px; height:40px; border-radius:50%; display:grid; place-items:center; font-family:'Oswald',sans-serif; font-weight:700; font-size:1.2rem; flex-shrink:0; z-index:2; }
        .alternative-text{ font-size: clamp(.9rem,2.5vw,1.1rem); line-height:1.5; z-index:2; position:relative; }
        .quiz-actions{ display:flex; justify-content:center; gap:1rem; margin-top:auto; padding-top:2rem; }
        .action-btn{ background: var(--gradient-main); color: var(--dark-bg); padding: clamp(1rem,3vw,1.2rem) clamp(2rem,4vw,3rem); border:none; border-radius:50px; font-family:'Oswald',sans-serif; font-size: clamp(1rem,2.5vw,1.2rem); font-weight:700; text-transform:uppercase; letter-spacing:1px; cursor:pointer; transition: all .3s; box-shadow:0 5px 20px rgba(0,255,136,.3); position:relative; overflow:hidden; }
        .action-btn:hover{ transform: translateY(-3px) scale(1.05); box-shadow: 0 10px 30px rgba(0,255,136,.5); }
        .action-btn:disabled{ opacity:.5; cursor:not-allowed; transform:none; box-shadow:none; }
        .action-btn::before{ content:''; position:absolute; inset:0; left:-100%; background: linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent); transition: left .6s; }
        .action-btn:hover::before{ left:100% }
        .modal-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.8); backdrop-filter: blur(10px); z-index:10000; display:flex; align-items:center; justify-content:center; opacity:0; visibility:hidden; transition: all .3s; }
        .modal-overlay.active{ opacity:1; visibility:visible }
        .feedback-modal{ background: var(--card-bg); border:3px solid var(--neon-green); border-radius:25px; padding: clamp(2rem,5vw,3rem); max-width:90vw; max-height:90vh; overflow:auto; text-align:center; box-shadow:0 0 50px rgba(0,255,136,.5); }
        .feedback-modal.error{ border-color: var(--error-red); box-shadow: 0 0 50px rgba(255,51,51,.5); }
        .feedback-title{ font-family:'Oswald',sans-serif; font-size: clamp(1.5rem,4vw,2rem); font-weight:900; text-transform:uppercase; color: var(--neon-green); margin-bottom:1rem; }
        .feedback-title.error{ color: var(--error-red) }
        .correct-answer{ font-size: clamp(1rem,2.5vw,1.2rem); line-height:1.6; color: var(--text-primary); margin-bottom:1rem; }
        .explanation{ font-size: clamp(.9rem,2vw,1rem); line-height:1.6; color: var(--text-secondary); font-style: italic; }
        .continue-btn{ background: var(--gradient-secondary); color: var(--dark-bg); padding:1rem 3rem; border:none; border-radius:25px; font-family:'Oswald',sans-serif; font-weight:700; text-transform:uppercase; letter-spacing:1px; cursor:pointer; transition:.2s; margin-top:2rem; }
        .continue-btn:hover{ transform: translateY(-2px) scale(1.05); box-shadow: 0 5px 20px rgba(255,107,53,.4); }
        .results-container{ max-width:800px; margin:0 auto; padding:2rem; text-align:center; }
        .results-card{ background: var(--card-bg); border:3px solid var(--neon-green); border-radius:25px; padding: clamp(3rem,6vw,4rem); position:relative; overflow:hidden; box-shadow:0 0 50px rgba(0,255,136,.3); }
        .results-card::before{ content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background: conic-gradient(var(--neon-green)0deg,var(--neon-pink)90deg,var(--neon-blue)180deg,var(--neon-yellow)270deg,var(--neon-green)360deg); animation: rotate 8s linear infinite; opacity:.05; }
        @keyframes rotate{ from{ transform: rotate(0) } to{ transform: rotate(360deg) } }
        .results-title{ font-family:'Oswald',sans-serif; font-size: clamp(2rem,6vw,3.5rem); font-weight:900; text-transform:uppercase; background: var(--gradient-main); -webkit-background-clip:text; -webkit-text-fill-color:transparent; margin-bottom:2rem; position:relative; z-index:2; }
        .score-display{ font-size: clamp(3rem,8vw,5rem); font-family:'Oswald',sans-serif; font-weight:900; color: var(--neon-green); text-shadow:0 0 30px var(--neon-green); margin:2rem 0; position:relative; z-index:2; }
        .performance-stats{ display:grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap:2rem; margin:3rem 0; position:relative; z-index:2; }
        .stat-item{ background: var(--darker-bg); border:2px solid var(--neon-pink); border-radius:15px; padding:2rem; transition:.3s; }
        .stat-item:hover{ transform: translateY(-10px); border-color: var(--neon-green); box-shadow: 0 10px 30px rgba(0,255,136,.3); }
        .stat-label{ font-size:.9rem; color: var(--text-secondary); text-transform:uppercase; letter-spacing:1px; margin-bottom:.5rem; }
        .stat-value{ font-family:'Oswald',sans-serif; font-size: clamp(1.5rem,4vw,2rem); font-weight:700; color: var(--neon-yellow); }
        .improvement-areas{ background: var(--darker-bg); border:2px solid var(--neon-blue); border-radius:20px; padding:2rem; margin:2rem 0; text-align:left; position:relative; z-index:2; }
        .improvement-title{ font-family:'Oswald',sans-serif; font-size: clamp(1.2rem,3vw,1.5rem); font-weight:700; color: var(--neon-blue); text-transform:uppercase; margin-bottom:1rem; text-align:center; }
        .improvement-list{ list-style:none; padding:0; }
        .improvement-list li{ padding:.5rem 0 .5rem 2rem; color: var(--text-secondary); position:relative; }
        .improvement-list li::before{ content:'💡'; position:absolute; left:0; top:.5rem; }
        .lobby-btn{ background: var(--gradient-main); color: var(--dark-bg); padding: clamp(1.2rem,3vw,1.5rem) clamp(3rem,6vw,4rem); border:none; border-radius:50px; font-family:'Oswald',sans-serif; font-size: clamp(1.1rem,3vw,1.3rem); font-weight:700; text-transform:uppercase; letter-spacing:1px; cursor:pointer; transition:.3s; box-shadow:0 5px 30px rgba(0,255,136,.4); margin-top:2rem; position:relative; z-index:2; overflow:hidden; }
        .lobby-btn:hover{ transform: translateY(-5px) scale(1.05); box-shadow:0 15px 50px rgba(0,255,136,.6); }
        .lobby-btn::before{ content:''; position:absolute; inset:0; left:-100%; background: linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent); transition:left .6s; }
        .lobby-btn:hover::before{ left:100% }
        .hidden{ display:none !important }
        @media (max-width:768px){ .header-content{ flex-direction:column; text-align:center } .quiz-info{ flex-direction:column; gap:1rem } .quiz-container{ margin-top:160px } .question-container{ padding:1rem; min-height: calc(100vh - 200px) } .alternatives-container{ gap:.8rem } .alternative{ padding:1rem } .alternative-letter{ width:35px; height:35px; font-size:1rem } .quiz-actions{ flex-direction:column; align-items:center } .action-btn{ width:100%; max-width:300px } .performance-stats{ grid-template-columns:1fr; gap:1rem } .feedback-modal{ margin:1rem; max-width: calc(100vw - 2rem) } }
        @media (max-width:480px){ .quiz-container{ margin-top:180px } }
        ::-webkit-scrollbar{ width:8px } ::-webkit-scrollbar-track{ background: var(--darker-bg) } ::-webkit-scrollbar-thumb{ background: var(--gradient-main); border-radius:4px } ::-webkit-scrollbar-thumb:hover{ background: var(--neon-green) }
    </style>
</head>
<body>
    <div class="bg-grid"></div>
    <div class="neon-particles" id="particles"></div>
    <header>
        <div class="header-content">
            <div class="logo" onclick="goToLobby()">🔥 QUIZ MATEMÁTICA</div>
            <div class="quiz-info">
                <div class="progress-info">
                    <div class="question-counter" id="questionCounter">QUESTÃO 1/10</div>
                    <div class="score" id="scoreDisplay">ACERTOS: 0</div>
                </div>
            </div>
        </div>
    </header>
    <div class="quiz-container">
        <div id="questionScreen" class="question-container">
            <div class="question-card">
                <div class="question-number" id="questionNumber">QUESTÃO 1</div>
                <div class="question-text" id="questionText">Carregando pergunta...</div>
            </div>
            <div class="alternatives-container" id="alternativesContainer"></div>
            <div class="quiz-actions">
                <button class="action-btn" id="confirmBtn" onclick="confirmAnswer()" disabled>🎯 CONFIRMAR RESPOSTA</button>
            </div>
        </div>
        <div id="resultsScreen" class="results-container hidden">
            <div class="results-card">
                <h1 class="results-title">RESULTADO FINAL</h1>
                <div class="score-display" id="finalScore">0/10</div>
                <div class="performance-stats">
                    <div class="stat-item"><div class="stat-label">📊 APROVEITAMENTO</div><div class="stat-value" id="percentageScore">0%</div></div>
                    <div class="stat-item"><div class="stat-label">✅ ACERTOS</div><div class="stat-value" id="correctAnswers">0</div></div>
                    <div class="stat-item"><div class="stat-label">❌ ERROS</div><div class="stat-value" id="incorrectAnswers">0</div></div>
                </div>
                <div class="improvement-areas">
                    <h3 class="improvement-title">🎯 ÁREAS PARA MELHORAR</h3>
                    <ul class="improvement-list" id="improvementList"></ul>
                </div>
                <div style="display:flex; gap:.75rem; justify-content:center; flex-wrap:wrap;">
                    <button class="lobby-btn" onclick="returnToLobby()">🏠 VOLTAR PARA O LOBBY</button>
                    <button class="lobby-btn" onclick="goToReport()">📊 VER RELATÓRIO</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-overlay" id="feedbackModal"><div class="feedback-modal" id="feedbackContent"></div></div>
    <script>
        const questions = [
            {
                question: "Anderson comprou 120 figurinhas, 72 eram repetidas. As repetidas representam qual porcentagem do total?",
                alternatives: ["72%", "60%", "48%", "40%", "30%"],
                correct: 1,
                explanation: "Para calcular a porcentagem: (72 ÷ 120) × 100 = 0,6 × 100 = 60%. As figurinhas repetidas representam 60% do total."
            },
            {
                question: "Festa: 20 pessoas → R$600; 24 → R$720; 28 → R$840. A expressão correta é:",
                alternatives: ["C=32n", "C=30n", "C=28n", "D=24n", "C=20n"],
                correct: 1,
                explanation: "Analisando a relação: R$600 ÷ 20 = R$30 por pessoa. Verificando: 24 × 30 = 720 ✓. A expressão é C = 30n."
            },
            {
                question: "Um rapaz comprou: 2 calças de R$94, 3 camisas de R$65, 1 tênis R$125, 1 boné e 1 sandália de R$49. Pagou R$156 à vista, o resto em 3 vezes. Valor de cada parcela:",
                alternatives: ["134", "150", "161", "202", "254"],
                correct: 0,
                explanation: "Total: 2×94 + 3×65 + 125 + 49 = 188 + 195 + 125 + 49 = R$557. Resta: 557 - 156 = 401. Parcela: 401 ÷ 3 = R$133,67 ≈ R$134."
            },
            {
                question: "Pizza com 20 pedaços. João comeu 3/12, esposa 2/5. Quantos pedaços sobraram?",
                alternatives: ["7", "8", "9", "10", "11"],
                correct: 0,
                explanation: "João: 3/12 de 20 = 5 pedaços. Esposa: 2/5 de 20 = 8 pedaços. Consumidos: 5 + 8 = 13. Sobraram: 20 - 13 = 7 pedaços."
            },
            {
                question: "Geladeira de R$1.259,00 paga em 5 vezes sem juros. Parcela:",
                alternatives: ["251,80", "251,40", "251,00", "242,00", "231,00"],
                correct: 0,
                explanation: "Dividindo o valor total: R$ 1.259,00 ÷ 5 = R$ 251,80. Cada parcela será de R$ 251,80."
            },
            {
                question: "Uma vela de 10 cm, após 36 min restaram 4 cm. Tempo total até acabar:",
                alternatives: ["60", "90", "134", "144", "360"],
                correct: 0,
                explanation: "Queimou 6 cm em 36 min. Taxa: 6÷36 = 1/6 cm/min. Para queimar 10 cm: 10 ÷ (1/6) = 60 min. Resposta: 60 min."
            },
            {
                question: "Bala segue a parábola y = −5x² + 90x. Altura máxima:",
                alternatives: ["30", "40,5", "81,5", "405", "810"],
                correct: 3,
                explanation: "Para função quadrática y = ax² + bx + c, x do vértice = -b/2a = -90/(-10) = 9. y(9) = -5(81) + 90(9) = -405 + 810 = 405."
            },
            {
                question: "Polinômio p(x)=8(x−3)(x−4)²(x−5)³(x−6)⁴(x−7)⁵. Raízes distintas:",
                alternatives: ["1−5", "3−7", "3−8", "1−7", "1−8"],
                correct: 1,
                explanation: "As raízes são os valores que anulam o polinômio: x = 3, 4, 5, 6, 7. São 5 raízes distintas, de 3 a 7."
            },
            {
                question: "Antônio fez prova de 20 questões: 7 certas (+5), 8 erradas (−2), resto em branco (−1). Pontuação:",
                alternatives: ["14", "22", "24", "30", "31"],
                correct: 0,
                explanation: "7 certas: 7×5 = 35 pontos. 8 erradas: 8×(-2) = -16 pontos. 5 em branco: 5×(-1) = -5 pontos. Total: 35-16-5 = 14 pontos."
            },
            {
                question: "Felipe precisa de fio: 2√10 + 6√17, e vai comprar o dobro. Aproximadamente:",
                alternatives: ["61,6", "58,4", "43,6", "41,6", "45,5"],
                correct: 0,
                explanation: "√10 ≈ 3,16 e √17 ≈ 4,12. Fio necessário: 2(3,16) + 6(4,12) = 6,32 + 24,72 = 31,04. Dobro: 31,04 × 2 = 62,08 ≈ 61,6."
            },
            {
                question: "Uma cesta básica custava R$220,00 em 2021 e R$308,00 em 2022. O aumento percentual foi:",
                alternatives: ["88%", "44%", "40%", "28,6%", "12%"],
                correct: 2,
                explanation: "Aumento: 308 - 220 = 88. Percentual: (88 ÷ 220) × 100 = 0,4 × 100 = 40%."
            },
            {
                question: "Uma casa tem 3,88 m de altura. A prefeitura só permite até 7,80 m. Qual deve ser a altura do segundo andar?",
                alternatives: ["3,92", "3,00", "4,92", "11,68", "12,00"],
                correct: 0,
                explanation: "Altura máxima permitida: 7,80m. Já construído: 3,88m. Restante para o segundo andar: 7,80 - 3,88 = 3,92m."
            },
            {
                question: "Roberta e família tiraram 550 litros de leite. Tio Paulo tirou 126 L, Tio Marcos tirou o dobro. Quanto tirou o avô?",
                alternatives: ["550", "378", "252", "200", "172"],
                correct: 4,
                explanation: "Tio Paulo: 126L. Tio Marcos (dobro): 252L. Total dos tios: 126 + 252 = 378L. Avô: 550 - 378 = 172L."
            },
            {
                question: "O medidor do carro mostrava o tanque em 1/4. Qual número decimal corresponde?",
                alternatives: ["0,25", "0,34", "0,43", "0,75", "0,85"],
                correct: 0,
                explanation: "Convertendo fração para decimal: 1 ÷ 4 = 0,25. Portanto, 1/4 = 0,25."
            },
            {
                question: "Lúcia gastou R$ 33,50 em camisa e R$ 42,20 em calça. Ela tinha R$100,00. Quanto sobrou?",
                alternatives: ["21,50", "24,30", "35,30", "57,80", "66,50"],
                correct: 1,
                explanation: "Gasto total: 33,50 + 42,20 = 75,70. Sobrou: 100,00 - 75,70 = R$ 24,30."
            },
            {
                question: "O número 0,075 é equivalente a qual fração irredutível?",
                alternatives: ["75/100", "3/40", "25/100", "9/8", "7/8"],
                correct: 1,
                explanation: "0,075 = 75/1000. Simplificando dividindo por 25: 75÷25 = 3 e 1000÷25 = 40. Resultado: 3/40."
            },
            {
                question: "Uma geladeira custa R$ 2.700,00 em 10x sem juros ou com 15% de desconto à vista. Valor à vista:",
                alternatives: ["3.105", "2.685", "2.295", "405", "15"],
                correct: 2,
                explanation: "Desconto de 15%: 2.700 × 0,15 = 405. Valor à vista: 2.700 - 405 = R$ 2.295,00."
            },
            {
                question: "Eduardo levou R$100,00, gastou R$ 33,50 e R$ 42,20. Com quanto ficou?",
                alternatives: ["21,50", "24,30", "35,30", "57,80", "66,50"],
                correct: 1,
                explanation: "Gasto total: 33,50 + 42,20 = 75,70. Restante: 100,00 - 75,70 = R$ 24,30."
            },
            {
                question: "√20 + √29 ≈ ?",
                alternatives: ["7,0", "7,4", "9,9", "24,5", "49,0"],
                correct: 2,
                explanation: "√20 = √(4×5) = 2√5 ≈ 2×2,236 = 4,47. √29 ≈ 5,39. Soma: 4,47 + 5,39 = 9,86 ≈ 9,9."
            },
            {
                question: "Uma pesquisa com 1000 pessoas: 70% bebem café; entre eles, 44% são mulheres. Quantos homens bebem café?",
                alternatives: ["700", "660", "392", "308", "260"],
                correct: 2,
                explanation: "Bebem café: 1000 × 0,70 = 700. Mulheres que bebem café: 700 × 0,44 = 308. Homens que bebem café: 700 - 308 = 392."
            },
            {
                question: "Um terreno mede 9√2 por 5√2 metros. O perímetro é aproximadamente:",
                alternatives: ["153,25", "39,48", "63,4", "53,4", "52,4"],
                correct: 1,
                explanation: "√2 ≈ 1,41. Lados: 9×1,41 = 12,69m e 5×1,41 = 7,05m. Perímetro: 2×(12,69 + 7,05) = 2×19,74 = 39,48m."
            },
            {
                question: "O saldo de André era R$ 60.000. Ele retirou 7.350, depositou 1.830, retirou 46.690 e 12.500. O saldo final é:",
                alternatives: ["-9.760", "-8.370", "-7.850", "-5.550", "-4.710"],
                correct: 4,
                explanation: "Saldo inicial: 60.000. Operações: -7.350 +1.830 -46.690 -12.500. Cálculo: 60.000 - 7.350 + 1.830 - 46.690 - 12.500 = -4.710."
            },
            {
                question: "População de bactérias A(t)=25·2^t. Para atingir 400, o tempo necessário é:",
                alternatives: ["2 h", "6 h", "4 h", "8 h", "16 h"],
                correct: 2,
                explanation: "25·2^t = 400. 2^t = 400÷25 = 16. 2^t = 16 = 2^4. Portanto t = 4 horas."
            },
            {
                question: "Carlos enche 40 litros de gasolina a R$ 5,10 por litro. Quanto gastará?",
                alternatives: ["45,10", "51,00", "200,40", "204,00", "214,00"],
                correct: 3,
                explanation: "Multiplicação simples: 40 litros × R$ 5,10 = R$ 204,00. Carlos gastará R$ 204,00."
            }
        ];
        const errorCharacters = [
            "https://i.ibb.co/Qj73wn6/IMG-4292.png",
            "https://i.ibb.co/kg63TCn/IMG-4287.png",
            "https://i.ibb.co/XkJ1Y9q/IMG-4285.png",
            "https://i.ibb.co/Wp7smTf/IMG-4283.png"
        ];
        let currentQuestionIndex = 0, selectedQuestions = [], score = 0, selectedAnswer = null, startTime = Date.now(), answered = false;
        let sessionAxis = {}, answers = [];
        function goToLobby(){ window.location.href = '/index.html#lobby'; }
        function goToReport(){ window.location.href = '/relatorio.html'; }
        function initQuiz(){ selectedQuestions = getRandomQuestions(questions, 10); currentQuestionIndex = 0; score = 0; selectedAnswer = null; startTime = Date.now(); answered = false; createParticles(); showQuestion(); }
        function getRandomQuestions(arr, count){ const shuffled = [...arr].sort(()=>0.5 - Math.random()); return shuffled.slice(0,count); }
        function createParticles(){ const c = document.getElementById('particles'); c.innerHTML = ''; for(let i=0;i<20;i++){ const p = document.createElement('div'); p.className='particle'; p.style.left=Math.random()*100+'%'; p.style.animationDelay=Math.random()*8+'s'; p.style.animationDuration=(8+Math.random()*4)+'s'; c.appendChild(p);} }
        function showQuestion(){ if (currentQuestionIndex >= selectedQuestions.length){ showResults(); return; } const q = selectedQuestions[currentQuestionIndex]; answered=false; document.getElementById('questionCounter').textContent = `QUESTÃO ${currentQuestionIndex+1}/10`; document.getElementById('scoreDisplay').textContent = `ACERTOS: ${score}`; document.getElementById('questionNumber').textContent = `QUESTÃO ${currentQuestionIndex+1}`; document.getElementById('questionText').textContent = q.question; const container = document.getElementById('alternativesContainer'); container.innerHTML = ''; q.alternatives.forEach((alt, idx)=>{ const div=document.createElement('div'); div.className='alternative'; div.onclick=()=>selectAnswer(idx); div.innerHTML=`<div class="alternative-letter">${String.fromCharCode(65+idx)}</div><div class="alternative-text">${alt}</div>`; container.appendChild(div); }); selectedAnswer=null; const btn=document.getElementById('confirmBtn'); btn.disabled=true; btn.textContent='🎯 CONFIRMAR RESPOSTA'; }
        function selectAnswer(index){ if (answered) return; document.querySelectorAll('.alternative').forEach(a=>a.classList.remove('selected')); document.querySelectorAll('.alternative')[index].classList.add('selected'); selectedAnswer=index; document.getElementById('confirmBtn').disabled=false; }
        function confirmAnswer(){ if (selectedAnswer===null || answered) return; answered=true; const q = selectedQuestions[currentQuestionIndex]; const isCorrect = selectedAnswer===q.correct; document.getElementById('confirmBtn').disabled=true; document.querySelectorAll('.alternative').forEach((alt, idx)=>{ alt.onclick=null; if (idx===q.correct) alt.classList.add('correct'); else if (idx===selectedAnswer && !isCorrect) alt.classList.add('incorrect'); }); if (isCorrect){ score++; document.getElementById('scoreDisplay').textContent = `ACERTOS: ${score}`; } const axis = guessAxisForMath(q.question + ' ' + (q.explanation||'')); if (!sessionAxis[axis]) sessionAxis[axis]={correct:0,total:0}; sessionAxis[axis].total += 1; if (isCorrect) sessionAxis[axis].correct += 1; answers.push({correct:isCorrect, axis}); setTimeout(()=>showFeedbackModal(isCorrect, q), 900); }
        function showFeedbackModal(isCorrect, q){ const modal=document.getElementById('feedbackModal'); const content=document.getElementById('feedbackContent'); if (isCorrect){ content.className='feedback-modal'; content.innerHTML=`<div class='feedback-title'>PARABÉNS!</div><div style='font-size:4rem;margin:1rem 0;'>🎉</div><div class='correct-answer'>Resposta correta!</div><div class='explanation'>${q.explanation}</div><button class='continue-btn' onclick='nextQuestion()'>CONTINUAR</button>`; } else { const img = errorCharacters[Math.floor(Math.random()*errorCharacters.length)]; const correctLetter = String.fromCharCode(65 + q.correct); content.className='feedback-modal error'; content.innerHTML=`<div class='feedback-title error'>RESPOSTA INCORRETA</div><img src='${img}' class='feedback-character error' onerror="this.style.display='none'" /><div class='speech-bubble'><div class='correct-answer'>A resposta correta é a alternativa <strong>${correctLetter}</strong>.</div><div class='explanation'>${q.explanation}</div></div><button class='continue-btn' onclick='nextQuestion()'>CONTINUAR</button>`; } modal.classList.add('active'); }
        function nextQuestion(){ document.getElementById('feedbackModal').classList.remove('active'); currentQuestionIndex++; if (currentQuestionIndex < selectedQuestions.length){ setTimeout(()=>{ document.querySelectorAll('.alternative').forEach(alt=>alt.classList.remove('correct','incorrect','selected')); showQuestion(); }, 250); } else { setTimeout(showResults, 250); } }
        function loadStats(){ try{ const raw=localStorage.getItem('saebStats'); return raw?JSON.parse(raw):{} }catch(e){ return {} } }
        function saveStats(s){ try{ localStorage.setItem('saebStats', JSON.stringify(s)); }catch(e){} }
        function updateStatsAfterQuiz(finalCorrect, totalQuestions, elapsedMinutes){ const stats = loadStats(); stats.quizzesCompleted = (stats.quizzesCompleted||0)+1; stats.totalMinutes=(stats.totalMinutes||0)+(elapsedMinutes||0); stats.overallCorrect=(stats.overallCorrect||0)+finalCorrect; stats.overallTotal=(stats.overallTotal||0)+totalQuestions; stats.mathCorrect=(stats.mathCorrect||0)+finalCorrect; stats.mathTotal=(stats.mathTotal||0)+totalQuestions; const passed = finalCorrect >= Math.ceil(totalQuestions*0.7); stats.currentStreak = passed ? (stats.currentStreak||0)+1 : 0; stats.bestStreak = Math.max(stats.bestStreak||0, stats.currentStreak); const overallPct = Math.round((stats.overallCorrect||0)/Math.max(1,(stats.overallTotal||0))*100); stats.ranking = overallPct>=90?'Lendário':overallPct>=75?'Pro':overallPct>=50?'Intermediário':'Iniciante'; saveStats(stats); }
        function loadHistory(){ try{ const raw=localStorage.getItem('saebHistory'); return raw?JSON.parse(raw):[] }catch(e){ return [] } }
        function saveHistory(h){ try{ localStorage.setItem('saebHistory', JSON.stringify(h)); }catch(e){} }
        function recordHistoryEntry(subject, correct, totalQuestions, elapsedMinutes, axes){ const history = loadHistory(); history.push({ date:new Date().toISOString(), subject, correct, totalQuestions, elapsedMinutes, percentage: Math.round((correct/Math.max(1,totalQuestions))*100), axes }); while(history.length>100) history.shift(); saveHistory(history); }
        function showResults(){ document.getElementById('questionScreen').classList.add('hidden'); document.getElementById('resultsScreen').classList.remove('hidden'); const finalTime = Math.floor((Date.now()-startTime)/60000); const percentage = Math.round((score/selectedQuestions.length)*100); document.getElementById('finalScore').textContent = `${score}/${selectedQuestions.length}`; document.getElementById('percentageScore').textContent = `${percentage}%`; document.getElementById('correctAnswers').textContent = score; document.getElementById('incorrectAnswers').textContent = selectedQuestions.length - score; updateStatsAfterQuiz(score, selectedQuestions.length, finalTime); recordHistoryEntry('matematica', score, selectedQuestions.length, finalTime, sessionAxis); const list=document.getElementById('improvementList'); list.innerHTML=''; if (percentage<50){ list.innerHTML = `<li>Revisar conceitos básicos de matemática</li><li>Praticar operações fundamentais</li><li>Estudar resolução de problemas</li><li>Fazer mais exercícios práticos</li>`; } else if (percentage<70){ list.innerHTML = `<li>Aprimorar técnicas de cálculo</li><li>Praticar interpretação de problemas</li><li>Revisar tópicos específicos</li>`; } else if (percentage<90){ list.innerHTML = `<li>Focar em questões mais complexas</li><li>Melhorar velocidade de resolução</li><li>Praticar questões avançadas</li>`; } else { list.innerHTML = `<li>Excelente desempenho!</li><li>Continue praticando para manter o nível</li><li>Experimente questões de nível superior</li>`; } }
        function returnToLobby(){ if (confirm('Deseja realmente reiniciar o quiz?')) { goToLobby(); } }
        function guessAxisForMath(text){ const t=(text||'').toLowerCase(); if (t.includes('porcent')||t.includes('percent')||t.includes('fraç')||t.includes('fracao')||t.includes('fração')||t.includes('regra de três')||t.includes('propor')) return 'Números e Operações/Proporcionalidade'; if (t.includes('equação')||t.includes('equacao')||t.includes('função')||t.includes('funcao')||t.includes('parábola')||t.includes('parabola')||t.includes('polinôm')||t.includes('polinom')) return 'Álgebra e Funções'; if (t.includes('perímetro')||t.includes('area')||t.includes('área')||t.includes('volume')||t.includes('ângulo')||t.includes('angulo')||t.includes('figura')||t.includes('metros')||t.includes('m²')||t.includes('m3')) return 'Geometria e Medidas'; if (t.includes('média')||t.includes('media')||t.includes('gráfico')||t.includes('grafico')||t.includes('tabela')||t.includes('probab')||t.includes('pesquisa')) return 'Estatística e Probabilidade'; return 'Resolução de Problemas'; }
        window.addEventListener('load', initQuiz);
        window.addEventListener('error', e=>console.error('Erro no quiz:', e));
    </script>
</body>
</html>
